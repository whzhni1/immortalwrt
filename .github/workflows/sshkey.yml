name: ç”ŸæˆSSHå¯†é’¥

on:
  workflow_dispatch:  # åªæœ‰æ‰‹åŠ¨è§¦å‘

jobs:
  generate-ssh:
    runs-on: ubuntu-latest
    steps:
    - name: ç”ŸæˆSSHå¯†é’¥å¯¹
      run: |
        echo "ğŸ”„ æ­£åœ¨ç”ŸæˆSSHå¯†é’¥å¯¹..."
        # ç”Ÿæˆæ–°çš„SSHå¯†é’¥
        ssh-keygen -t ed25519 -f github_key -N "" -C "github-actions-$(date +%Y%m%d)"
        
        echo ""
        echo "=========================================="
        echo "âœ… SSHå¯†é’¥ç”Ÿæˆå®Œæˆï¼è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š"
        echo "=========================================="
        echo ""
        echo "ğŸ“‹ ç¬¬ä¸€æ­¥ï¼šå¤åˆ¶ä¸‹é¢çš„å…¬é’¥å†…å®¹"
        echo "=========================================="
        cat github_key.pub
        echo "=========================================="
        echo ""
        echo "ğŸ–±ï¸ ç¬¬äºŒæ­¥ï¼šå°†å…¬é’¥æ·»åŠ åˆ°GitHubè´¦æˆ·"
        echo "   1. ç™»å½• GitHub.com"
        echo "   2. ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ Settings"
        echo "   3. å·¦ä¾§èœå•é€‰æ‹© SSH and GPG keys"
        echo "   4. ç‚¹å‡» New SSH key"
        echo "   5. Titleè¾“å…¥: GitHub Actions SSH"
        echo "   6. Key typeä¿æŒé»˜è®¤"
        echo "   7. ç²˜è´´ä¸Šé¢å¤åˆ¶çš„å…¬é’¥å†…å®¹"
        echo "   8. ç‚¹å‡» Add SSH key"
        echo ""
        echo "ğŸ’¾ ç¬¬ä¸‰æ­¥ï¼šä¿å­˜ç§é’¥ï¼ˆé‡è¦ï¼ï¼‰"
        echo "=========================================="
        echo "ç§é’¥å†…å®¹ï¼ˆè¯·ä¿å­˜åˆ°å®‰å…¨ä½ç½®ï¼‰:"
        echo "=========================================="
        cat github_key
        echo "=========================================="
        echo ""
        echo "ğŸ”’ ç§é’¥ç”¨é€”è¯´æ˜ï¼š"
        echo "   - å¦‚æœéœ€è¦ä»å…¶ä»–ä½ç½®è®¿é—®ï¼Œå¯èƒ½éœ€è¦æ­¤ç§é’¥"
        echo "   - è¯·å¦¥å–„ä¿ç®¡ï¼Œä¸è¦æ³„éœ²ç»™ä»–äºº"
        echo "   - å¦‚æœä¸¢å¤±ï¼Œå¯ä»¥é‡æ–°ç”Ÿæˆæ–°çš„å¯†é’¥å¯¹"
        echo ""
        echo "âœ… å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼ŒSSHèœå•é…ç½®å·¥ä½œæµå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼"
        
    - name: ä¸Šä¼ å¯†é’¥æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
      uses: actions/upload-artifact@v4
      with:
        name: ssh-keys
        path: |
          github_key
          github_key.pub
        retention-days: 1  # åªä¿ç•™1å¤©ï¼Œç¡®ä¿å®‰å…¨
